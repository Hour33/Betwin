<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Register | Betwin</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0b3d2e;
  color:#fff;
}
.container{
  padding:20px;
}
.tabs{
  display:flex;
  border-radius:30px;
  overflow:hidden;
  margin-bottom:25px;
}
.tabs div{
  flex:1;
  padding:14px;
  text-align:center;
  font-weight:bold;
}
.tabs .active{
  background:linear-gradient(90deg,#f6d34b,#f2b705);
  color:#000;
}
.tabs .inactive{
  background:#083025;
  cursor:pointer;
}

h2{
  text-align:center;
  margin:10px 0 30px;
}

input{
  width:100%;
  padding:16px;
  border:none;
  border-radius:30px;
  margin-bottom:15px;
  background:#1f4f3a;
  color:#fff;
  font-size:14px;
}

.phone{
  display:flex;
  gap:10px;
}
.phone select{
  background:#1f4f3a;
  border:none;
  border-radius:30px;
  padding:16px;
  color:#fff;
}

.checkbox{
  display:flex;
  align-items:center;
  gap:10px;
  margin:15px 0;
}

button{
  width:100%;
  padding:16px;
  border:none;
  border-radius:30px;
  background:#2c6e4f;
  color:#fff;
  font-size:16px;
  cursor:pointer;
}
button:disabled{
  opacity:0.6;
  cursor:not-allowed;
}

#msg{
  margin-top:15px;
  text-align:center;
  font-size:14px;
}
</style>
</head>

<body>
<div class="container">

  <div class="tabs">
    <div class="active">Register</div>
    <div class="inactive" onclick="location.href='login.html'">Login</div>
  </div>

  <h2>Welcome to<br><strong>BETWIN</strong></h2>

  <input id="username" placeholder="Username">

  <div class="phone">
    <select>
      <option>+234</option>
    </select>
    <input id="phone" placeholder="Mobile">
  </div>

  <input id="password" type="password" placeholder="Password">
  <input id="confirmPassword" type="password" placeholder="Confirm password">

  <div class="checkbox">
    <input type="checkbox" id="ageCheck">
    <span>Already over 18 years old</span>
  </div>

  <button id="registerBtn">Register</button>

  <div id="msg"></div>

</div>

<script>
const SHEETY_URL = "https://api.sheety.co/9b805411b5ecdb493c774c33fb4e5b61/code3/code3";

const registerBtn = document.getElementById("registerBtn");
const msg = document.getElementById("msg");

registerBtn.addEventListener("click", async () => {
  const username = document.getElementById("username").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const password = document.getElementById("password").value.trim();
  const confirmPassword = document.getElementById("confirmPassword").value.trim();
  const ageChecked = document.getElementById("ageCheck").checked;

  msg.textContent = "";
  msg.style.color = "#fff";

  if (!username || !phone || !password || !confirmPassword) {
    msg.style.color = "red";
    msg.textContent = "Please fill all fields";
    return;
  }

  if (!ageChecked) {
    msg.style.color = "red";
    msg.textContent = "You must confirm you are over 18";
    return;
  }

  if (password !== confirmPassword) {
    msg.style.color = "red";
    msg.textContent = "Passwords do not match";
    return;
  }

  registerBtn.disabled = true;
  msg.style.color = "#f6d34b";
  msg.textContent = "Registering...";

  try {
    const res = await fetch(SHEETY_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        code3: {
          username: username,
          phone: phone,
          password: password,
          balance: 200
        }
      })
    });

    const data = await res.json();
    console.log("Sheety response:", data);

    if (!data.code3) {
      msg.style.color = "red";
      msg.textContent = "Registration failed. Try again.";
      registerBtn.disabled = false;
      return;
    }

    msg.style.color = "#00ff9c";
    msg.textContent = "Registration successful! Redirecting...";
    setTimeout(() => {
      location.href = "login.html";
    }, 1000);

  } catch (err) {
    msg.style.color = "red";
    msg.textContent = "Network error. Try again.";
    registerBtn.disabled = false;
  }
});
</script>

</body>
</html>
