<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Register | Betwin</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0b3d2e;
  color:#fff;
}
.container{
  padding:20px;
}
.tabs{
  display:flex;
  border-radius:30px;
  overflow:hidden;
  margin-bottom:25px;
}
.tabs div{
  flex:1;
  padding:14px;
  text-align:center;
  font-weight:bold;
  cursor:pointer;
}
.tabs .active{
  background:linear-gradient(90deg,#f6d34b,#f2b705);
  color:#000;
}
.tabs .inactive{
  background:#083025;
}

h2{
  text-align:center;
  margin:10px 0 30px;
}

input{
  width:100%;
  padding:16px;
  border:none;
  border-radius:30px;
  margin-bottom:15px;
  background:#1f4f3a;
  color:#fff;
  font-size:14px;
}

.phone{
  display:flex;
  gap:10px;
}
.phone select{
  background:#1f4f3a;
  border:none;
  border-radius:30px;
  padding:16px;
  color:#fff;
}

.checkbox{
  display:flex;
  align-items:center;
  gap:10px;
  margin:15px 0;
}

button{
  width:100%;
  padding:16px;
  border:none;
  border-radius:30px;
  background:#2c6e4f;
  color:#aaa;
  font-size:16px;
  cursor:pointer;
}

#message{
  margin-top:12px;
  text-align:center;
  font-size:14px;
  color:#4caf50; /* green for success */
  display:none;
}
</style>
</head>

<body>
<div class="container">

  <div class="tabs">
    <div class="active">Register</div>
    <div class="inactive" onclick="window.location='login.html'">Login</div>
  </div>

  <h2>Welcome to<br><strong>BETWIN</strong></h2>

  <input id="username" placeholder="Username">
  
  <div class="phone">
    <select id="countryCode">
      <option>+234</option>
    </select>
    <input id="mobile" placeholder="Mobile">
  </div>

  <input id="password" type="password" placeholder="Password">
  <input id="confirmPassword" type="password" placeholder="Confirm password">

  <div class="checkbox">
    <input id="ageCheck" type="checkbox">
    <span>Already over 18 years old</span>
  </div>

  <button onclick="registerUser()">Register</button>

  <div id="message"></div>

</div>

<script>
async function registerUser() {
  const username = document.getElementById('username').value.trim();
  const country = document.getElementById('countryCode').value;
  const mobile = document.getElementById('mobile').value.trim();
  const password = document.getElementById('password').value;
  const confirmPassword = document.getElementById('confirmPassword').value;
  const ageCheck = document.getElementById('ageCheck').checked;
  const messageDiv = document.getElementById('message');

  messageDiv.style.display = 'none';
  messageDiv.textContent = '';

  if (!username || !mobile || !password || !confirmPassword) {
    messageDiv.style.color = 'red';
    messageDiv.textContent = 'Please fill all fields';
    messageDiv.style.display = 'block';
    return;
  }
  if (password !== confirmPassword) {
    messageDiv.style.color = 'red';
    messageDiv.textContent = 'Passwords do not match';
    messageDiv.style.display = 'block';
    return;
  }
  if (!ageCheck) {
    messageDiv.style.color = 'red';
    messageDiv.textContent = 'You must confirm you are over 18 years old';
    messageDiv.style.display = 'block';
    return;
  }

  const data = {
    code3: {
      username: username,
      mobile: country + mobile,
      password: password
    }
  };

  try {
    const response = await fetch('https://api.sheety.co/9b805411b5ecdb493c774c33fb4e5b61/code3/code3', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(data)
    });

    if (response.ok) {
      messageDiv.style.color = '#4caf50';
      messageDiv.textContent = 'Registration successful! Redirecting to login...';
      messageDiv.style.display = 'block';

      setTimeout(() => {
        window.location = 'login.html';
      }, 1500); // 1.5 seconds delay
    } else {
      messageDiv.style.color = 'red';
      messageDiv.textContent = 'Registration failed. Try again.';
      messageDiv.style.display = 'block';
    }
  } catch (error) {
    console.error(error);
    messageDiv.style.color = 'red';
    messageDiv.textContent = 'An error occurred. Please try again.';
    messageDiv.style.display = 'block';
  }
}
</script>

</body>
</html>
