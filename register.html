<!DOCTYPE html>  <html lang="en">  
<head>  
<meta charset="UTF-8">  
<meta name="viewport" content="width=device-width, initial-scale=1.0">  
<title>Register | Betwin</title>  <style>  
body{  
  margin:0;  
  font-family:Arial, sans-serif;  
  background:#0b3d2e;  
  color:#fff;  
}  
.container{padding:20px;}  
.tabs{  
  display:flex;  
  border-radius:30px;  
  overflow:hidden;  
  margin-bottom:25px;  
}  
.tabs div{  
  flex:1;  
  padding:14px;  
  text-align:center;  
  font-weight:bold;  
}  
.tabs .active{  
  background:linear-gradient(90deg,#f6d34b,#f2b705);  
  color:#000;  
}  
.tabs .inactive{  
  background:#083025;  
  cursor:pointer;  
}  
h2{text-align:center;margin:10px 0 30px;}  
  
input{  
  width:100%;  
  padding:16px;  
  border:none;  
  border-radius:30px;  
  margin-bottom:15px;  
  background:#1f4f3a;  
  color:#fff;  
  font-size:14px;  
}  
.phone{display:flex;gap:10px;}  
.phone select{  
  background:#1f4f3a;  
  border:none;  
  border-radius:30px;  
  padding:16px;  
  color:#fff;  
}  
.checkbox{  
  display:flex;  
  align-items:center;  
  gap:10px;  
  margin:15px 0;  
}  
button{  
  width:100%;  
  padding:16px;  
  border:none;  
  border-radius:30px;  
  background:#2c6e4f;  
  color:#fff;  
  font-size:16px;  
  cursor:pointer;  
}  
button:disabled{opacity:.6;}  
#msg{  
  text-align:center;  
  margin-top:15px;  
  font-size:14px;  
}  
</style>  </head>  <body>  
<div class="container">    <div class="tabs">  
    <div class="active">Register</div>  
    <div class="inactive" onclick="location.href='login.html'">Login</div>  
  </div>    <h2>Welcome to<br><strong>BETWIN</strong></h2>    <input id="username" placeholder="Username">    <div class="phone">  
    <select>  
      <option>+234</option>  
    </select>  
    <input id="phone" placeholder="Mobile">  
  </div>    <input id="password" type="password" placeholder="Password">  
  <input id="confirmPassword" type="password" placeholder="Confirm password">    <div class="checkbox">  
    <input type="checkbox" id="ageCheck">  
    <span>Already over 18 years old</span>  
  </div>  <button id="registerBtn">Register</button>

  <div id="msg"></div>  </div>  <script>
const SHEETY_URL = "https://api.sheety.co/27e2b7c20c5e6bc24ecedde0dfffa8a5/betwin1/betwin1";

const btn = document.getElementById("registerBtn");
const msg = document.getElementById("msg");

btn.onclick = async () => {
  const username = document.getElementById("username").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const password = document.getElementById("password").value.trim();
  const confirm = document.getElementById("confirmPassword").value.trim();

  if (!username || !phone || !password || !confirm) {
    msg.textContent = "Fill all fields";
    return;
  }

  if (password !== confirm) {
    msg.textContent = "Passwords do not match";
    return;
  }

  btn.disabled = true;
  msg.textContent = "Checking...";

  try {
    /* 1️⃣ GET USERS */
    const checkRes = await fetch(SHEETY_URL);
    if (!checkRes.ok) {
      msg.textContent = "Could not check users";
      btn.disabled = false;
      return;
    }

    const checkData = await checkRes.json();
    const users = checkData.betwin1 || [];

    const duplicate = users.some(
      u => u.username === username || u.phone === phone
    );

    if (duplicate) {
      msg.textContent = "Username or phone already exists";
      btn.disabled = false;
      return;
    }

    /* 2️⃣ SAVE USER */
    msg.textContent = "Saving...";

    const saveRes = await fetch(SHEETY_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        betwin1: { username, phone, password }
      })
    });

    const saveData = await saveRes.json();
    console.log("SAVE RESPONSE:", saveData);

    if (!saveRes.ok) {
      msg.textContent = "Registration failed";
      btn.disabled = false;
      return;
    }

    /* 3️⃣ SUCCESS */
    msg.textContent = "Registered successfully!";
    setTimeout(() => {
      window.location.href = "login.html";
    }, 1000);

  } catch (err) {
    console.error(err);
    msg.textContent = "Network error";
    btn.disabled = false;
  }
};
</script>  </body>  
</html>
